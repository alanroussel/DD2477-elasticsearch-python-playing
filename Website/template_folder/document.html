<!-- <!DOCTYPE html>
<html>
  <head>
    <title>{{ filename }}</title>
  </head>
  <body>
    <h1>{{ filename }}</h1>
    <pre>{{ content }}</pre>
    <a href="{{ url_for('home') }}">Back to search results</a>
    


  </body>
  <script>
    var startTime = Date.now();
    var filename = "{{ filename }}";
    
    
    window.onbeforeunload = function() {
      var endTime = Date.now();
      var duration = endTime - startTime;
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/update_click_info", true);
      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xhr.send("filename=" + filename + "&duration=" + duration);
      xhr.send("filename=" + filename + "&duration=" + duration + "&query=" + query);

    };
  </script>
  
</html> -->

<!DOCTYPE html>
<html>
  <head>
    <title>{{ filename }}</title>
  </head>
  <body>
    <h1>{{ filename }}</h1>
    <pre>{{ content }}</pre>
    <a href="{{ url_for('home') }}">Back to search results</a>
    


  </body>
  <script>
    var startTime = Date.now();
    var filename = "{{ filename }}";
    
    
    window.onbeforeunload = function() {
      var endTime = Date.now();
      var duration = endTime - startTime;
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "/update_user_data", true);
      xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
      xhr.send("filename=" + filename + "&duration=" + duration);
      xhr.send("filename=" + filename + "&duration=" + duration);

    };
  </script>
  
</html>
